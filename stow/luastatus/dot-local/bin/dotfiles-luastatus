#!/usr/bin/env bash
target="${DOTFILES_TARGET:-laptop}"
widgets="$(jq -r "join(\" \")" ~/dotfiles/conf/luastatus/targets/"$target"/widgets.json)"
if pgrep sdorfehs > /dev/null; then
	eval set "$widgets"
	exec luastatus-stdout-wrapper -B separator='' -- "$@" > ~/.config/sdorfehs/bar
elif pgrep dwm > /dev/null; then
	eval set "$widgets"
	exec luastatus -b dwm -B separator='' -- "$@"
fi
# vim:ft=sh
