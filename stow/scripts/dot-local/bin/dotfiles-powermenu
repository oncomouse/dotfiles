#!/usr/bin/env bash
font=${1:-"FiraCode Nerd Font 12"}
offset=0
if pgrep sdorfehs > /dev/null; then
	font="$(sdorfehs -c 'set font')"
	font_size="$(echo "$font" | cut -d "=" -f 2)"
	font="${font/:size=/ }"
	padding="$(sdorfehs -c 'set padding' | cut -d " " -f 2)"
	barpadding="$(sdorfehs -c 'set barpadding' | cut -d " " -f 2)"
	offset=$((padding + barpadding * 2 + font_size + 2))
fi
choice="$(printf "Lock\nSuspend\nLogoff\nRestart\nShutdown" | rofi -dmenu -match fuzzy -auto-select -i -p Powermenu -font "$font"	-location 1 -theme-str "window { width: 100%; height: 8em; y-offset: $offset; }" -fixed-num-lines )"
case $choice in
	Lock)
		xscreensaver-command -lock
		;;
	Suspend)
		xscreensaver-command -lock && xset dpms force off
		;;
	Logoff)
		pkill dwm
		;;
	Restart)
		reboot
		;;
	Shutdown)
		poweroff
		;;
esac
# vim:ft=sh
