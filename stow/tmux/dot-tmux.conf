## Clipboard Settings:
set -s set-clipboard external
set-window-option -g mode-keys vi
run-shell 'tmux setenv -g TMUX_VERSION $(tmux -V|sed "s/[^0-9.]*//g")'
run-shell 'tmux setenv -g OS $(uname -s)'
bind-key -T copy-mode-vi 'v' send -X begin-selection
if -b "command -v reattach-to-user-namespace > /dev/null 2>&1" \
  "run 'tmux set -g default-command \"exec $(tmux show -gv default-shell) 2>/dev/null & reattach-to-user-namespace -l $(tmux show -gv default-shell)\"'"

# Shell script for yanking:
yank="~/.tmux/yank.sh"
# Remap keys which perform copy to pipe copied text to OS clipboard
bind -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "$yank"
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "$yank"
bind -T copy-mode-vi Y send-keys -X copy-pipe-and-cancel "$yank; tmux paste-buffer"
bind -T copy-mode-vi C-j send-keys -X copy-pipe-and-cancel "$yank"
bind-key -T copy-mode-vi D send-keys -X copy-end-of-line \;\
  run "tmux save-buffer - | $yank"
bind-key -T copy-mode-vi A send-keys -X append-selection-and-cancel \;\
  run "tmux save-buffer - | $yank"

# Do not copy selection and cancel copy mode on drag end event
# Prefer iTerm style selection: select, then mouse click to copy to buffer
unbind -T copy-mode-vi MouseDragEnd1Pane
bind -T copy-mode-vi MouseDown1Pane select-pane \;\
  send-keys -X copy-pipe "$yank" \;\
  send-keys -X clear-selection
# Working fancy underline:
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*256col*:Tc"           # true colous support
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'  # undercurl support
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'
# Standard status colors:
set -g status-fg colour7
set -g status-bg colour8
# Key bindings:
bind | split-window -hc "#{pane_current_path}"
bind - split-window -vc "#{pane_current_path}"
unbind '"'
unbind %
bind R source ~/.tmux.conf
bind-key q confirm kill-window
bind-key Q confirm kill-server
# Status:
# set -g status-right-length 0
set -g status-right ""
## Custom DWM Tmux
source $HOME/dotfiles/conf/tmux/dwm.tmux.conf
# Refresh layout on pane exit:
set-hook -g pane-exited refresh
bind -n M-n newpane
bind -n M-w newpanecdir
bind -n M-c killpane
bind -n M-j nextpane
bind -n M-k prevpane
bind -n M-, rotateccw 
bind -n M-. rotatecw
bind -n M-Space focuspane
bind -n M-r refresh
bind -n M-m zoom
# vim:ft=tmux
